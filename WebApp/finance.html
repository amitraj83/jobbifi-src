<style>
    .panel-success > .panel-footer {
        color: #468847;
        background-color: #dff0d8;
        border-color: #d6e9c6;
    }

    .panel-heading > .table, .panel-heading > .table th {
        margin: 0px;
        border: 0px;
    }

    th {
        background-color: #428bca;
        color: white;
    }
</style>
<script>
    $(document).ready(function () {
        $('.list-group a').click(function (e) {
            $('.list-group-item').removeClass('active');
            var $this = $(this);
            if (!$this.hasClass('active')) {
                $this.addClass('active');
            }
            e.preventDefault();
        });

        var showTransHistory = function (pagenum) {
            var from;
            var to;

            if (pagenum == null || pagenum == undefined) {
                var now = new Date();
                //now.setMonth(now.getMonth()-1);
                now.setYear(2001);
                now.setMonth(00);
                now.setDate(01);
                $('#todatepicker').datepicker("update", new Date());
                $('#fromdatepicker').datepicker("update", now);
                from = $('#fromdatepicker').datepicker("getDate");
                to = $('#todatepicker').datepicker("getDate");
                pagenum = 1;
            }
            else {
                from = $('#fromdatepicker').datepicker("getDate");
                to = $('#todatepicker').datepicker("getDate");
            }

            var param = "user=" + user.getUserName() + "&fromDate=" + from.getTime() + "&toDate=" + to.getTime() + "&pagenum=" + pagenum;
            $.ajax({
                type: "POST",
                url: BASE_URL + "transhistory.do",
                data: param
            }).done(function (res) {
                var transData = jQuery.parseJSON(res);
                var allRows = jQuery.parseJSON(transData.list);
                if (Number(transData.totalsize) < 10)
                    $(".pagination").html("");
                //alert(transData.totalsize);
                var rows = "";
                var size = "1";
                $("#finance_transactionbody").html("");
                for (var i = 0; i < allRows.length; i++) {
                    var star = allRows[i].owner == "ESCROW" ? "*" : "";
                    var row = '<tr>		' +
                            '<td>' + (new Date(Number(allRows[i].time)).format("d mmm, yyyy ") ) + '</td>' +
                            '<td>' + allRows[i].owner + '</td>' +
                            '<td>' + allRows[i].otherParty + '</td>' +
                            '<td>' + allRows[i].gross + '' + star + '</td>' +
                            '<td>' + allRows[i].fee + '</td>' +
                            '<td>' + (allRows[i].balance).toFixed(2) + '</td>' +
                            '</tr>';
                    $("#finance_transactionbody").append(row);
                }

            });
        }

        $('.datepicker').datepicker({format: 'dd-mm-yyyy'});

        $("#finance_thistory").click(function () {

            $.get("transactionhistory.html", function (data) {
                $("#finance_maincontent").html(data);
                showTransHistory();
            });

        });

        $.get("transactionhistory.html", function (data) {
            $("#finance_maincontent").html(data);

            showTransHistory();
        });

        $(document).on("click", ".transpage", function (event) {
            event.preventDefault();
            $(".transpage").css("background", "white");
            $(".transpage").css("color", "#428bca");
            $(this).css("background", "#428bca"); //:
            $(this).css("color", "white");

            showTransHistory($(this).text());
        });

        $(document).on('click', '#showTransHistoryButton', function () {
            showTransHistory(1);
        });

        $("#finance_withdraw").click(function () {
            $.get("withdraw.html", function (data) {
                $("#finance_maincontent").html(data);
            });
        });

        $("#finance_escrow").click(function () {
            $.get("escrow.html", function (data) {
                $("#finance_maincontent").html(data);
            });
        });
        $("#finance_payeedetails").click(function () {
            $("#finance_maincontent").html("<h3>Coming Soon....</h3>");
        });

        $("#finance_invoices").click(function () {
            $.get("invoice.html", function (data) {
                $("#finance_maincontent").html(data);
            });
        });
        $("#finance_deposit").click(function () {
            $.get("deposit.html", function (data) {
                $("#finance_maincontent").html(data);
            });
        });


    });
</script>


<br>
<!-- Content Row -->
<div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
        <div class="list-group">
            <a href="javascript:void(0)" id="finance_thistory" class="list-group-item active">Transactions History</a>
            <a href="javascript:void(0)" id="finance_deposit" class="list-group-item">Deposit Funds</a>
            <a href="javascript:void(0)" id="finance_withdraw" class="list-group-item">Withdraw Funds</a>
            <!-- <a href="#" id="finance_escrow" class="list-group-item">Escrow Account</a> -->
            <a href="javascript:void(0)" id="finance_payeedetails" class="list-group-item">Payee Details</a>
            <a href="javascript:void(0)" id="finance_invoices" class="list-group-item">Manage Invoices</a>
        </div>
    </div>
    <!-- Content Column -->
    <div class="col-md-9" id="finance_maincontent" style="padding-left:1px;">

    </div>
</div>
